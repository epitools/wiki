<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>00 projection - EpiTools Wiki Pages</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">EpiTools Wiki Pages</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Analysis Modules <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li class="active">
    <a href="./">00 projection</a>
</li>
                            
<li >
    <a href="../01_registration/">01 registration</a>
</li>
                            
<li >
    <a href="../02_clahe/">02 clahe</a>
</li>
                            
<li >
    <a href="../03_segmentation/">03 segmentation</a>
</li>
                            
<li >
    <a href="../04_polygonMask/">04 polygonMask</a>
</li>
                            
<li >
    <a href="../05_tracking/">05 tracking</a>
</li>
                            
<li >
    <a href="../06_skeleton/">06 skeleton</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Icy Plugins <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../Icy_Plugins/00_Installation/">00 Installation</a>
</li>
                            
<li >
    <a href="../../Icy_Plugins/01_CellOverlay/">01 CellOverlay</a>
</li>
                            
<li >
    <a href="../../Icy_Plugins/02_CellGraph/">02 CellGraph</a>
</li>
                            
<li >
    <a href="../../Icy_Plugins/03_CellExport/">03 CellExport</a>
</li>
                            
<li >
    <a href="../../Icy_Plugins/04_CellEditor/">04 CellEditor</a>
</li>
                            
<li >
    <a href="../../Icy_Plugins/05_CellSurface/">05 CellSurface</a>
</li>
                            
<li >
    <a href="../../Icy_Plugins/06_CellClone/">06 CellClone</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../Quick_Guide/00_Installation/">00 Installation</a>
</li>
                            
<li >
    <a href="../../Quick_Guide/01_CreateAnalysisFile/">01 CreateAnalysisFile</a>
</li>
                            
<li >
    <a href="../../Quick_Guide/02_OpenAnalysisSM/">02 OpenAnalysisSM</a>
</li>
                            
<li >
    <a href="../../Quick_Guide/03_RunModules/">03 RunModules</a>
</li>
                            
<li >
    <a href="../../Quick_Guide/04_Connecting_icy/">04 Connecting icy</a>
</li>
                            
<li >
    <a href="../../Quick_Guide/05_Multiple_ROIs/">05 Multiple ROIs</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Support <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../Support/FAQ/">FAQ</a>
</li>
                            
<li >
    <a href="../../Support/Known_Issues/">Known Issues</a>
</li>
                            
<li >
    <a href="../../Support/Latest_News/">Latest News</a>
</li>
                            
<li >
    <a href="../../Support/Release_Notes/">Release Notes</a>
</li>
                            
<li >
    <a href="../../Support/Software_License/">Software License</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../01_registration/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/epitools">
                                <i class="fa fa-github"></i>GitHub
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#selective-plane-projection-for-z-stacks">Selective Plane Projection for Z-Stacks</a></li>
            <li><a href="#summary">Summary</a></li>
            <li><a href="#assumptions">Assumptions</a></li>
            <li><a href="#main-algorithm-steps">Main algorithm steps:</a></li>
            <li><a href="#output-files-in-the-analysis-folder">Output files in the Analysis/ folder</a></li>
            <li><a href="#parameters">Parameters</a></li>
            <li><a href="#debugging">Debugging</a></li>
            <li><a href="#references">References</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="selective-plane-projection-for-z-stacks">Selective Plane Projection for Z-Stacks</h1>
<hr />
<h2 id="summary">Summary</h2>
<p>Creates a 2D projection from a Z-stack by selectively choosing from which plane to extract each pixel based on a surface estimation.</p>
<p><img alt="Selective Plane Projection" src="../../Images/matlab/projection.png" /></p>
<hr />
<h2 id="assumptions">Assumptions</h2>
<p>The input image is composed of several z planes representing a cohesive tissue which can be approximated by a 3D surface. In order to exclude another surface from being also projected the latter has to have a lower intensity or at least a smaller number of high intensity points than the region of interest (ROI).</p>
<hr />
<h2 id="main-algorithm-steps">Main algorithm steps:</h2>
<ol>
<li>1st Surface estimation [1] using the highest intensities in the sample (1st quartile)</li>
<li>Application of a cutoff distance to confine the ROI</li>
<li>2nd Surface estimation [1] using the highest intensities in the confined ROI</li>
<li>Projection of the Z-Stack on a 2D plane using (3)</li>
</ol>
<hr />
<h2 id="output-files-in-the-analysis-folder">Output files in the <em>Analysis/</em> folder</h2>
<table>
<thead>
<tr>
<th>File</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ProjIm.mat</strong></td>
<td>Matlab matrix file containing the projected image for each frame</td>
</tr>
<tr>
<td><strong>Surface.mat</strong></td>
<td>Matlab matrix file containing the original z-plane index for each pixel in <em>ProjIm.mat</em></td>
</tr>
<tr>
<td><strong>vtk/gridfit_frame_###.vtk</strong></td>
<td>Surface files for every frame containing the coordinates of the 2nd gridFit estimation in ASCII format (1 grid point per line: x,y,z) (see <a href="../../Icy_Plugins/05_CellSurface">CellSurface plugin</a> for further usage) [ ! <em>output added starting from version 2.1.5</em> ]</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="parameters">Parameters</h2>
<p><code>Parameter: Smoothing Radius</code></p>
<ul>
<li>Defines the amount of gaussian blur to be applied on the image before estimating the surface (the original image data is preserved for the modules to follow).</li>
<li>Selecting a higher amount of blurring will make the image smoother but mask the details.</li>
<li>units [pixels]</li>
<li>recommended range [0.1 - 5]</li>
</ul>
<p><code>Parameter: Surface Smoothness 1</code></p>
<ul>
<li>Input parameter for the first gridFit© estimation of the highest intensity surface.</li>
<li>Selecting a larger value will make the surface smoother but less accurate. The parameter should be tuned such that the surface is detailed enough to capture the ROI but without containing points from the outer region (e.g. visualized by spike-like departures). </li>
<li>units [positive scalar]  </li>
<li>recommended range [30 - 100]</li>
</ul>
<p><code>Parameter: Cutoff distance</code></p>
<ul>
<li>Defines the region of interest in absolute terms from the first estimated surface.</li>
<li>Selecting a larger cutoff distance will include more signal from above and below the estimated surface. It is important that the filtered set of high intensity points should include only signal from the ROI. </li>
<li>units [z-plane distance]  </li>
<li>recommended range [1-3, decimals allowed]</li>
</ul>
<p><code>Parameter: Surface Smoothness 2</code></p>
<ul>
<li>Input parameter for the 2nd gridFit© estimation of the intensity surface.</li>
<li>This surface estimation is based only on the points from the previous part (2) and can therefore be more detailed, i.e. less smooth. It is important to estimate the detailed morphology to ensure that the correct plane is extracted for every pixel location of the ROI.</li>
<li><em>units</em> [positive scalar]  </li>
<li><em>recommended range</em> [20-50]</li>
</ul>
<hr />
<h2 id="debugging">Debugging</h2>
<ul>
<li>Turn this switch on to see the intermediate estimated surfaces.</li>
<li><strong>Warning!</strong> Do only apply on single stacks generates a lot of images.</li>
</ul>
<hr />
<h2 id="references">References</h2>
<ul>
<li>[1] <a href="http://www.mathworks.ch/matlabcentral/fileexchange/8998-surface-fitting-using-gridfit">Surface Fitting using gridfit by John D’Errico</a></li>
</ul>
<hr />
<h6 id="do-you-think-these-informations-are-not-enough-to-help-you-drop-a-line-to-the-author-and-he-will-extend-this-tutorial-asap">Do you think these informations are not enough to help you? Drop a line to the author and he will extend this tutorial asap!</h6>
<h6 id="this-page-was-written-by-davide-heller-on-1011151740">This page was written by <a href="mailto:davide.heller@imls.uzh.ch">Davide Heller</a> on 10.11.15@17:40</h6>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55332946-1', 'auto');
  ga('send', 'pageview');

</script></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
