<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Region growing segmentation - EpiTools Wiki Pages</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">EpiTools Wiki Pages</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Analysis Modules <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../00_projection/" class="dropdown-item">Selective Plane Projection for Z-Stacks</a>
</li>
                                    
<li>
    <a href="../01_registration/" class="dropdown-item">Registration of Time Series</a>
</li>
                                    
<li>
    <a href="../02_clahe/" class="dropdown-item">Contrast limited adaptive histogram equalization</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Region growing segmentation</a>
</li>
                                    
<li>
    <a href="../04_polygonMask/" class="dropdown-item">Polygonal Mask</a>
</li>
                                    
<li>
    <a href="../05_tracking/" class="dropdown-item">Tracking Corrections</a>
</li>
                                    
<li>
    <a href="../06_skeleton/" class="dropdown-item">Skeleton Generation</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Icy Plugins <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Icy_Plugins/00_Installation/" class="dropdown-item">Installation of the EpiTools plugins for ICY</a>
</li>
                                    
<li>
    <a href="../../Icy_Plugins/01_CellOverlay/" class="dropdown-item">Generating overlays using CellOverlay</a>
</li>
                                    
<li>
    <a href="../../Icy_Plugins/02_CellGraph/" class="dropdown-item">Creating new Graphs with CellGraph</a>
</li>
                                    
<li>
    <a href="../../Icy_Plugins/03_CellExport/" class="dropdown-item">Exporting data with CellExport</a>
</li>
                                    
<li>
    <a href="../../Icy_Plugins/04_CellEditor/" class="dropdown-item">Modifying Skeleton Images with CellEditor</a>
</li>
                                    
<li>
    <a href="../../Icy_Plugins/05_CellSurface/" class="dropdown-item">Visualizing GridFitÂ© Surfaces with CellSurface and CellProjection</a>
</li>
                                    
<li>
    <a href="../../Icy_Plugins/06_CellClone/" class="dropdown-item">Detecting Cell Clones</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Quick Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Quick_Guide/00_Installation/" class="dropdown-item">Installation</a>
</li>
                                    
<li>
    <a href="../../Quick_Guide/01_CreateAnalysisFile/" class="dropdown-item">01 CreateAnalysisFile</a>
</li>
                                    
<li>
    <a href="../../Quick_Guide/02_OpenAnalysisSM/" class="dropdown-item">02 OpenAnalysisSM</a>
</li>
                                    
<li>
    <a href="../../Quick_Guide/03_RunModules/" class="dropdown-item">03 RunModules</a>
</li>
                                    
<li>
    <a href="../../Quick_Guide/04_Connecting_icy/" class="dropdown-item">Visualize results in icy</a>
</li>
                                    
<li>
    <a href="../../Quick_Guide/05_Multiple_ROIs/" class="dropdown-item">Step-by-Step guide to export skeletons from multiple ROIs</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Support <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Support/FAQ/" class="dropdown-item">Frequently Asked Questions</a>
</li>
                                    
<li>
    <a href="../../Support/Known_Issues/" class="dropdown-item">Known issues</a>
</li>
                                    
<li>
    <a href="../../Support/Latest_News/" class="dropdown-item">Support</a>
</li>
                                    
<li>
    <a href="../../Support/Release_Notes/" class="dropdown-item">Release note</a>
</li>
                                    
<li>
    <a href="../../Support/Software_License/" class="dropdown-item">Software License</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../02_clahe/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../04_polygonMask/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/epitools" class="nav-link"><i class="fa fa-github"></i> GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#region-growing-segmentation" class="nav-link">Region growing segmentation</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#summary" class="nav-link">Summary</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#assumptions" class="nav-link">Assumptions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#algorithm-steps" class="nav-link">Algorithm Steps</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="region-growing-segmentation">Region growing segmentation</h1>
<hr />
<h2 id="summary">Summary</h2>
<p>Segmentation procedure to detect the individual cells in the image and find the boundaries with a seed based region growing algorithm.  </p>
<p><img alt="Selective Plane Projection" src="../../Images/matlab/segmentation.png" /></p>
<hr />
<h2 id="assumptions">Assumptions</h2>
<p>The input image is assumed to have high intensity membrane signal on low intensity background.</p>
<hr />
<h2 id="algorithm-steps">Algorithm Steps</h2>
<h3 id="1seeding-cells">1.Seeding cells</h3>
<p>Detects individual cells by placing a seed for each cell region. Seeds are iteratively placed by raising an intensity level (low to high intensity). 
At the same time seeds are also grown into regions to detect whether an immediate neighbor region could be joined based on two thresholds.<br />
The first parameter to optimize for this step is the <code>Gaussian blur kernel</code>. After this the <code>minimum cell area</code> size and <code>minimal membrane intensity</code> can be modified
to reduce over-seeding of the cells.<br />
The reference figure when the debug option is active is <em>Figure 2: First seeding</em>.</p>
<p><code>Parameter: Gaussian Blur Kernel</code></p>
<ul>
<li>Initial gaussian blur to reduce the the sensitivity of the seeding</li>
<li>Increasing the kernel size reduces the number of seeds while reducing it increases them. Given the removal steps to follow it is better to slightly overseed the cells.</li>
<li><em>units</em> [scalar]  </li>
<li><em>recommended range</em> [0-5, decimals]</li>
</ul>
<p><code>Parameter: Minimum cell area</code></p>
<ul>
<li>Area threshold to merge touching regions with insufficient cell area.</li>
<li>The higher the threshold the more cells will be merged in the beginning because of insufficient size.</li>
<li><em>units</em> [pixels]</li>
<li><em>recommended value</em> [20]</li>
</ul>
<p><code>Parameter: Minimal membrane intensity</code></p>
<ul>
<li>Intensity threshold up to which regions which touch are merged, i.e. the membrane/boundary intensity is insufficient for two independent cells.</li>
<li>The higher the threshold, the more seeds will be initially merged.</li>
<li><em>units</em> [intensity/pixel value]</li>
<li><em>recommended value</em> [20]</li>
</ul>
<h3 id="2merge-seeds">2.Merge Seeds</h3>
<p>Regions which touch with a low boundary signal after the initial seeding are analyzed to avoid seeding a cell multiple times.
 The regions of the initial seeds are used to analyze the boundary signal.<br />
 The reference figure when the debug option is active is <em>Figure 3: Seeding after merging</em>.</p>
<p><code>Parameter: Boundary Low Intensity Ratio</code></p>
<ul>
<li>Percentage of pixels in the boundary below the following intensity threshold<ul>
<li><em>seedIntensity + std(cell background)/2</em></li>
</ul>
</li>
<li>e.g. ratio = 0.35: 35% of the pixels in the boundary have a value lower than the threshold above.</li>
<li><em>units</em> [-]  </li>
<li><em>recommended value</em> [0.35]</li>
</ul>
<h3 id="3region-growing">3.Region growing</h3>
<p>Segmentation algorithm to find the cell boundaries starting from the seeds. The strategy is very similar to the watershedding algorithm.<br />
The reference figure when the debug option is active is <em>Figure 4: First cell boundaries</em>.</p>
<p><code>parameter: Gaussian Blur Kernel</code></p>
<ul>
<li>Gaussian blur to reduce intensity fluctuations that could affect the segmentation algorithm.</li>
<li>The higher the kernel the less segmented the image will be washing out weak membrane signal.</li>
<li><em>units</em> [scalar]  </li>
<li><em>recommended range</em> [0-5, decimals]</li>
</ul>
<h3 id="4bad-region-removal">4.Bad region removal</h3>
<p>Method to avoid false positives, i.e. regions with insufficient boundary signal or that are too large to be a cell. 
This applies especially to outer regions that have not been correctly detected.<br />
The reference figure when the debug option is active is <em>Figure 5: Boundaries after poor cell removal</em></p>
<p><code>parameter: Largest Cell Area</code></p>
<ul>
<li>An upper threshold to how big a cell can be. </li>
<li>If a cell region region is greater it is removed.</li>
<li><em>units</em> [pixels]</li>
<li><em>default value</em> [3000]</li>
</ul>
<p><code>parameter: Minimal mean intensity</code></p>
<ul>
<li>A lower threshold to the minimal mean intensity on the boundary of a cell</li>
<li>If a cell has a lower mean intensity on it's boundary than the threshold it is eliminated</li>
<li><em>units</em> [intensity]</li>
<li><em>default value</em> [30]</li>
</ul>
<hr />
<h3 id="additional-parameters">Additional Parameters</h3>
<p><code>parameter: Use Clahe Image</code></p>
<ul>
<li>The segmentation will use the image processed with CLAHE</li>
<li>In order to run, this option requires that the <a href="../02_clahe">clahe module</a> was executed beforehand</li>
<li>Activate this option when an uneven background illumination induces a poor segmentation performance</li>
</ul>
<hr />
<h3 id="debug">Debug</h3>
<ul>
<li>Set the debugging flag to view intermediate results (<strong>Attention</strong> use preferably in test mode)</li>
</ul>
<hr />
<h6 id="do-you-think-these-informations-are-not-enough-to-help-you-drop-a-line-to-the-author-and-he-will-extend-this-tutorial-asap">Do you think these informations are not enough to help you? Drop a line to the author and he will extend this tutorial asap!</h6>
<h6 id="this-page-was-written-by-davide-heller-on-3009141538">This page was written by <a href="mailto:davide.heller@gmail.com">Davide Heller</a> on 30.09.14@15.38</h6>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55332946-1', 'auto');
  ga('send', 'pageview');

</script></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/jquery-3.6.0.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
